const postListPromise=fetch("resources/postList.json").then(data=>{return data.json()});function decodeURIParams(){const url=window.location.href;const obj={};let params=url.split("?");if(params[1]){params=params[1].split("=")}for(const param of params){obj[params[0]]=params[1]}return obj}function renderPostList(postList){for(const post of postList.posts){renderListEntry(post)}loaded()}function renderListEntry(post){const postList=document.getElementById("postList");const li=document.createElement("li");const a=document.createElement("a");const postTitle=document.createElement("h3");const postDesc=document.createElement("p");a.href=`?link=${post.link}`;postTitle.innerText=post.title;postDesc.innerText=post.desc;li.appendChild(postTitle);li.appendChild(postDesc);a.appendChild(li);postList.appendChild(a)}function renderPost(post){fetch(`blogPosts/${post.link}.html`).then(data=>{return data.text()}).then(text=>{const blog=document.getElementById("blog");const blogPost=document.createElement("div");const title=document.createElement("h2");const returnLink=document.createElement("a");returnLink.href="blog.html";returnLink.innerText="Back to blog";blogPost.id="blogPost";title.innerText=post.title;blogPost.appendChild(title);blogPost.innerHTML+=text;blog.appendChild(returnLink);blog.appendChild(blogPost);loaded()}).catch(error=>{document.getElementById("blog").innerHTML=`${error}`})}function main(){const params=decodeURIParams();postListPromise.then(json=>{if(params.link){document.getElementById("postList").remove();for(const post of json.posts){if(post.link==params.link){renderPost(post);break}}}else{renderPostList(json)}})}document.addEventListener("DOMContentLoaded",main);